"use strict";const wlbObj=()=>{jQuery(document).ready(function(o){var t=[];if(o(".wlb-lookbook-instagram-item, .wlb-lookbook-item-wrapper").each(function(){var e=o(this).find(".wlb-zoom").attr("data-id");t.push(e)}),o(".wlb-zoom,.wlb-controls-next,.wlb-controls-previous,.wlb-ajax").bind("click",function(){o(".wlb-product-frame").hide(),o(".woocommerce-lookbook-quickview, .wlb-loading").fadeIn(200);var e=o(this).attr("data-id"),r=o(this).attr("data-pid");if(e){o(".wlb-controls-next,.wlb-controls-previous").removeAttr("data-pid");let r=t.indexOf(e),a=0,l=t.length-1;r<t.length-1&&(a=r+1),r>0&&(l=r-1),o(".wlb-controls-next").attr("data-id",t[a]),o(".wlb-controls-previous").attr("data-id",t[l]),o.ajax({type:"POST",data:{action:"wlb_get_lookbook",lookbook_id:e},xhrFields:{withCredentials:!0},url:_woocommerce_lookbook_params.ajax_url,success:function(t){t.left&&o(".wlb-left .wlb-lookbook-data").html(t.left),t.right&&o(".wlb-right .wlb-product-data").html(t.right),o(".wlb-loading").hide(),o(".wlb-product-frame").fadeIn(500);let e=o(".wlb-lookbook-data").width();o(".wlb-0 .wlb-right").css({"max-height":e+"px"}),s(),b(),o(".woocommerce-product-gallery").each(function(){o(this).trigger("wc-product-gallery-before-init",[this,wc_single_product_params]),o(this).wc_product_gallery(wc_single_product_params),o(this).trigger("wc-product-gallery-after-init",[this,wc_single_product_params])})},error:function(o){}})}if(r){o(".wlb-controls-next,.wlb-controls-previous").removeAttr("data-id");var a=[],l=[];o(this).closest(".wlb-lookbook-item-wrapper").find(".wlb-ajax").each(function(){var t=o(this).attr("data-pid"),e=o(this).attr("data-purl");a.push(t),l.push(e)}),a.length<1?(a=(a=o(".wlb-controls").attr("data-products")).split(","),l=(l=o(".wlb-controls").attr("data-products_url")).split(",")):o(".wlb-controls").attr("data-products",a).attr("data-products_url",l);var i=a.indexOf(r),c=0,n=a.length-1;i<a.length-1&&(c=i+1),i>0&&(n=i-1),o(".wlb-controls-next").attr("data-pid",a[c]).attr("data-purl",l[c]),o(".wlb-controls-previous").attr("data-pid",a[n]).attr("data-purl",l[n]);var d="&product_id="+r;o.ajax({type:"POST",data:d,url:_woocommerce_lookbook_params.wc_ajax_url.toString().replace("%%endpoint%%","wlb_get_product"),success:function(t){t.left&&o(".wlb-left .wlb-lookbook-data").html(t.left),t.right&&o(".wlb-right .wlb-product-data").html(t.right),o(".wlb-loading").hide(),o(".wlb-product-frame").fadeIn(500),s(),b(),o(".woocommerce-lookbook-quickview-inner .woodmart-swatch").length>0&&woodmartThemeModule.init(),o(".woocommerce-product-gallery").each(function(){o(this).trigger("wc-product-gallery-before-init",[this,wc_single_product_params]),o(this).wc_product_gallery(wc_single_product_params),o(this).trigger("wc-product-gallery-after-init",[this,wc_single_product_params])})},error:function(o){}})}}),o("body").on("click",function(t){o(t.target).is(" .wlb-left,.wlb-product-wrapper")&&o(".woocommerce-lookbook-quickview").fadeOut(200)}),o("body").on("keyup",function(t){"Escape"===t.key&&o(".woocommerce-lookbook-quickview").fadeOut(200)}),o(".wlb-overlay,.wlb-close").bind("click",function(){o(".woocommerce-lookbook-quickview").fadeOut(200)}),o(".wlb-lookbook-carousel").length>0){var e=o(window).width(),r=_woocommerce_lookbook_params.effect,a=_woocommerce_lookbook_params.cols,l=220;"1"===_woocommerce_lookbook_params.gallery_to_slide&&o(".wlb-lookbook-carousel").hasClass("wlb-flag")?e>=768?(o(".wlb-lookbook-carousel.wlb-flag").hide(),o(".wlb-lookbook-gallery.wlb-flag").show()):(o(".wlb-lookbook-gallery.wlb-flag").hide(),o(".wlb-lookbook-carousel.wlb-flag").show(),l=150):(void 0!==a&&""!==a||(a=3),e<768&&e>=600&&(a=2),e<600&&(a=1)),"fade"===r&&(a=1);var i=!!_woocommerce_lookbook_params.pagination,c=!!_woocommerce_lookbook_params.auto;o(".wlb-lookbook-carousel").vi_flexslider({namespace:"woocommerce-lookbook-",selector:".wlb-lookbook-items >.wlb-lookbook-item-wrapper",animation:r,animationLoop:!0,itemWidth:l,itemMargin:10,controlNav:i,maxItems:a,reverse:!1,slideshow:c,slideshowSpeed:_woocommerce_lookbook_params.time}),_woocommerce_lookbook_params.navigation||o(".woocommerce-lookbook-direction-nav").remove()}if(o(".wlb-lookbook-carousel").length>0){var n=o(".wlb-lookbook-carousel").attr("data-col"),d=o(window).width();null==n&&(n=4),d<768&&d>=600&&(n=2),d<600&&(n=1);var w=o(".wlb-lookbook-carousel").attr("data-rtl");w=!!parseInt(w),o(".wlb-lookbook-carousel").vi_flexslider({namespace:"woocommerce-lookbook-",selector:".woocommerce-lookbook-inner >.wlb-lookbook-instagram-item",animation:"slide",animationLoop:!1,itemWidth:200,itemMargin:10,controlNav:!1,maxItems:n,reverse:!1,slideshow:!1,rtl:w})}function s(){o(".variations_form").each(function(){o(this).wc_variation_form()})}function b(){o(".wlb-product-frame").unbind(),o(".wlb-product-frame").on("submit",".wlb-right:not(.wlb-external) .cart, .wlb-product-gallery:not(.wlb-external) .cart",function(t){t.preventDefault();var e=o(this).serializeArray(),r=o(this).find('button[type="submit"]');r.attr("disabled","disabled").addClass("wlb-adding"),e.push({name:r.attr("name"),value:r.val()}),o.ajax({url:o(this).attr("action"),type:o(this).attr("method"),data:e,success:function(t){var e=(new DOMParser).parseFromString(t,"text/html"),a=o(e).find(".woocommerce [role=alert]");a.length?(a.find("a").remove(),o(".wlb-added").html(a).fadeIn(500)):o(".wlb-added").fadeIn(500),o(".wlb-added").fadeOut(3e3),o(".wlb-added").unbind(),r.removeAttr("disabled").removeClass("wlb-adding"),_woocommerce_lookbook_params.redirect_url&&(window.location.href=_woocommerce_lookbook_params.redirect_url),o("body").trigger("wc_fragment_refresh")}})})}})};wlbObj(),jQuery(window).on("elementor/frontend/init",function(){window.elementor&&elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-lookbook.default",function(){wlbObj()})});